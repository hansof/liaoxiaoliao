{"version":3,"sources":["webpack:///./src/views/myFans/myFans.vue?dfea","webpack:///./src/views/myFans/myFans.vue?ff15","webpack:///src/views/myFans/myFans.vue","webpack:///./src/views/myFans/myFans.vue?49ec","webpack:///./src/views/myFans/myFans.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","refresh","infinite","_l","item","index","key","id","headImgUrl","defaultHead","on","$event","findIntroduce","_v","_s","nickName","follow","userNo","_e","directives","name","rawName","value","expression","staticRenderFns","data","userInfo","$util","parse","getCookie","datalist","lastId","followFlag","noDate","noDateFlag","components","defaultPage","mounted","beforeRouteLeave","$author","next","methods","ajaxRequest","fansList","setTimeout","$refs","myscroller","finishInfinite","done","state","$comfirm","title","content","confirmBtn","cancelBtn","$subScription","userFollow","component"],"mappings":"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","file":"assets/js/chunk-68982821.c8c2e6ab.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./myFans.vue?vue&type=style&index=0&id=712605da&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./myFans.vue?vue&type=style&index=0&id=712605da&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"myFans\"},[_c('scroller',{ref:\"myscroller\",attrs:{\"on-refresh\":_vm.refresh,\"on-infinite\":_vm.infinite}},[_c('ul',{staticClass:\"list\"},[_vm._l((_vm.datalist),function(item,index){return [_c('li',{key:'fans'+item.id},[_c('img',{attrs:{\"src\":item.headImgUrl,\"onerror\":_vm.defaultHead},on:{\"click\":function($event){return _vm.findIntroduce(item)}}}),_c('h3',[_vm._v(_vm._s(item.nickName))]),(item.follow=='0'||item.follow==null)?_c('a',{staticClass:\"gzbtn\",attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.follow(0,item.userNo,index)}}},[_vm._v(\"+关注\")]):_vm._e(),(item.follow=='1')?_c('a',{staticClass:\"gzbtn gzbtn_\",attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.follow(1,item.userNo,index)}}},[_vm._v(\"已关注\")]):_vm._e()])]})],2)]),_c('default-Page',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.noDateFlag),expression:\"noDateFlag\"}]})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"myFans\">\n    <scroller :on-refresh=\"refresh\" :on-infinite=\"infinite\" ref=\"myscroller\">\n      <ul class=\"list\">\n        <template v-for=\"(item,index) in datalist\">\n          <li :key=\"'fans'+item.id\">\n            <img @click=\"findIntroduce(item)\" :src=\"item.headImgUrl\" :onerror=\"defaultHead\" />\n            <h3>{{item.nickName}}</h3>\n            <a\n              href=\"javascript:;\"\n              class=\"gzbtn\"\n              @click=\"follow(0,item.userNo,index)\"\n              v-if=\"item.follow=='0'||item.follow==null\"\n            >+关注</a>\n            <a\n              href=\"javascript:;\"\n              class=\"gzbtn gzbtn_\"\n              @click=\"follow(1,item.userNo,index)\"\n              v-if=\"item.follow=='1'\"\n            >已关注</a>\n          </li>\n        </template>\n      </ul>\n    </scroller>\n    <default-Page v-show=\"noDateFlag\"></default-Page>\n  </div>\n</template>\n\n<script>\nimport defaultPage from \"@/components/defaultPage/defaultPage\";\nexport default {\n  name: \"myFans\",\n  data() {\n    return {\n      userInfo: this.$util.parse(this.$util.getCookie(\"userInfo\")),\n      datalist: [],\n      lastId: null,\n      followFlag: \"0\",\n      noDate: false, //这是一个判断是否加载的开关\n      noDateFlag: false,\n      defaultHead: 'this.src=\"' + require(\"@/assets/img/head.png\") + '\"'\n    };\n  },\n  components: {\n    \"default-Page\": defaultPage\n  },\n  mounted() {},\n  beforeRouteLeave(to, from, next) {\n    this.$author(\"false\");\n    next(true);\n  },\n  methods: {\n    findIntroduce(item) {\n      this.ajaxRequest(\n        {\n          path: \"api-server/apih5/account/user/findIntroduce\",\n          data: {\n            userNo: item.userNo\n          }\n        },\n        res => {\n          if (res.data.code == \"0000\") {\n            this.$author({\n              headImg: item.headImgUrl,\n              userName: item.nickName,\n              content:\n                res.data.data == null || res.data.data == \"\"\n                  ? \"暂未设置资料内容\"\n                  : res.data.data,\n              contentCss:\n                res.data.data == null || res.data.data == \"\"\n                  ? { \"text-align\": \"center\" }\n                  : { \"text-align\": \"left\" },\n              followUserNo: item.userNo,\n              followStatus: 1,\n              followFlag: false\n            })\n              .then(res => {})\n              .catch(res => {});\n          } else {\n          }\n        }\n      );\n    },\n    fansList() {\n      let wxUser = this.userInfo.wxUser;\n      this.ajaxRequest(\n        {\n          path: \"api-server/apih5/account/user/fansList\",\n          data: {\n            userNo: wxUser.userNo,\n            lastId: this.lastId,\n            pageSize: 20\n          }\n        },\n        res => {\n          if (res.data.code == \"0000\") {\n            if (!res.data.data || JSON.stringify(res.data.data) == \"{}\") {\n              this.noDate = true;\n              if (!this.lastId) {\n                this.noDateFlag = true;\n              }\n            } else {\n              if (!this.lastId) {\n                this.datalist = res.data.data;\n              } else {\n                this.datalist = this.datalist.concat(res.data.data);\n              }\n              this.lastId = res.data.data[res.data.data.length - 1].id;\n            }\n          } else if (res.data.code == \"1001\") {\n            if (this.datalist.length == 0) {\n              this.noDateFlag = true;\n            }\n            this.noDate = true;\n          }\n        }\n      );\n    },\n    refresh() {\n      this.lastId = null; //重置\n      this.noDate = false; //重置数据判断\n      setTimeout(() => {\n        this.fansList();\n        this.$refs.myscroller.finishPullToRefresh(); //刷新完毕关闭刷新的转圈圈\n      }, 1700);\n    },\n    // 上拉加载\n    infinite(done) {\n      if (this.noDate) {\n        this.$refs.myscroller.finishInfinite(true); //这个方法是不让它加载了，显示“没有更多数据”，要不然会一直转圈圈\n      } else {\n        setTimeout(() => {\n          this.fansList();\n          done(true); //进行下一次加载操作\n        }, 1500);\n      }\n    },\n    follow(state, userNo, index) {\n      if (state == \"1\") {\n        this.$comfirm({\n          title: \"提示\",\n          content: \"您确定取消关注吗？\",\n          confirmBtn: \"确定\",\n          cancelBtn: \"取消\"\n        })\n          .then(res => {\n            this.userFollow(state, userNo, index);\n          })\n          .catch(res => {});\n      } else {\n        if(this.userInfo.subscribe != 1){\n          this.$subScription()\n        }\n        //关注\n        this.userFollow(state, userNo, index);\n      }\n    },\n    userFollow(state, userNo, index) {\n      let wxUser = this.userInfo.wxUser;\n      this.ajaxRequest(\n        {\n          path: \"api-server/apih5/account/user/follow\",\n          data: {\n            userNo: wxUser.userNo,\n            expertUserNo: userNo,\n            state: state\n          }\n        },\n        res => {\n          if (res.data.code == \"0000\") {\n            this.datalist[index].follow =\n              res.data.message == \"关注成功\" ? 1 : 0;\n          }\n        }\n      );\n    }\n  }\n};\n</script>\n\n<style scoped>\n.myFans {\n}\n\n.list li {\n  height: 1.32rem;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0 0.24rem;\n  border-bottom: 1px solid #ececec;\n}\n\n.list li img {\n  width: 0.8rem;\n  height: 0.8rem;\n  margin-right: 0.2rem;\n  border-radius: 50%;\n}\n\n.list li h3 {\n  font-size: 0.3rem;\n  color: #333;\n  margin-right: auto;\n}\n.gzbtn {\n  /* position: absolute; */\n  color: #fff;\n  font-size: 0.26rem;\n  width: 1.1rem;\n  height: 0.48rem;\n  text-align: center;\n  background: #ef3d34;\n  border-radius: 0.4rem;\n  /* top: 0;\n  bottom: 0; */\n  margin: auto 0;\n  /* right: 0.24rem; */\n  display: flex;\n  justify-content: center;\n  align-items: Center;\n}\n.gzbtn_ {\n  background: #ececec;\n  color: #888888;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./myFans.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./myFans.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./myFans.vue?vue&type=template&id=712605da&scoped=true&\"\nimport script from \"./myFans.vue?vue&type=script&lang=js&\"\nexport * from \"./myFans.vue?vue&type=script&lang=js&\"\nimport style0 from \"./myFans.vue?vue&type=style&index=0&id=712605da&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"712605da\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}