{"version":3,"sources":["webpack:///./src/views/bindphone.vue?98ae","webpack:///./src/views/bindphone.vue?e290","webpack:///src/views/bindphone.vue","webpack:///./src/views/bindphone.vue?078f","webpack:///./src/views/bindphone.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","ref","attrs","on","sendCode","_s","codeHtml","next","staticRenderFns","name","data","userInfo","$util","parse","getCookie","seconds","timer","methods","$refs","phone","value","blackTs","bindPhone","ajaxRequest","setInterval","updateCode","clearInterval","component"],"mappings":"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","file":"assets/js/chunk-04535d44.efb32421.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./bindphone.vue?vue&type=style&index=0&id=0d959664&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./bindphone.vue?vue&type=style&index=0&id=0d959664&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bindinfo\"},[_c('div',{staticClass:\"bindinfoBox\"},[_c('div',{staticClass:\"Tips\"},[_vm._v(\"绑定手机号，保障您的账号安全\")]),_c('div',{staticClass:\"rows_1\"},[_c('div',{staticClass:\"us_1\"},[_vm._v(\"手机号码\")]),_c('input',{ref:\"phone\",staticClass:\"username\",attrs:{\"type\":\"tel\",\"pattern\":\"\\\\d*\",\"onpaste\":\"return false\",\"maxlength\":\"11\",\"placeholder\":\"请输入您的手机号码\",\"oninput\":\"value=value.replace(/[^\\\\d]/g,'')\"}}),_c('div',{staticClass:\"clear\"})]),_c('div',{staticClass:\"rows_1\"},[_c('div',{staticClass:\"us_1\"},[_vm._v(\"验 证 码\")]),_c('input',{ref:\"verify\",staticClass:\"username width\",attrs:{\"type\":\"tel\",\"pattern\":\"\\\\d*\",\"onpaste\":\"return false\",\"maxlength\":\"6\",\"placeholder\":\"请输入验证码\",\"oninput\":\"value=value.replace(/[^\\\\d]/g,'')\"}}),_c('a',{ref:\"codeBtn\",staticClass:\"codeBtn\",attrs:{\"href\":\"javascript:;\"},on:{\"click\":_vm.sendCode}},[_vm._v(\"\\n        \"+_vm._s(_vm.codeHtml)+\"\\n        \"),_c('span')]),_c('div',{staticClass:\"clear\"})]),_c('a',{staticClass:\"nextBtn\",attrs:{\"href\":\"javascript:;\"},on:{\"click\":_vm.next}},[_vm._v(\"下一步\")])]),_c('div',{staticClass:\"footTips\"},[_vm._v(\"本产品保证对您的任何个人信息进行严格保密\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"bindinfo\">\n    <div class=\"bindinfoBox\">\n      <div class=\"Tips\">绑定手机号，保障您的账号安全</div>\n      <div class=\"rows_1\">\n        <div class=\"us_1\">手机号码</div>\n        <input\n          class=\"username\"\n          type=\"tel\"\n          pattern=\"\\d*\"\n          onpaste=\"return false\"\n          ref=\"phone\"\n          maxlength=\"11\"\n          placeholder=\"请输入您的手机号码\"\n          oninput=\"value=value.replace(/[^\\d]/g,'')\"\n        />\n        <div class=\"clear\"></div>\n      </div>\n      <div class=\"rows_1\">\n        <div class=\"us_1\">验&nbsp;证&nbsp;码</div>\n        <input\n          class=\"username width\"\n          type=\"tel\"\n          pattern=\"\\d*\"\n          onpaste=\"return false\"\n          ref=\"verify\"\n          maxlength=\"6\"\n          placeholder=\"请输入验证码\"\n          oninput=\"value=value.replace(/[^\\d]/g,'')\"\n        />\n        <a href=\"javascript:;\" class=\"codeBtn\" @click=\"sendCode\" ref=\"codeBtn\">\n          {{codeHtml}}\n          <span></span>\n        </a>\n        <div class=\"clear\"></div>\n      </div>\n      <a href=\"javascript:;\" class=\"nextBtn\" @click=\"next\">下一步</a>\n    </div>\n    <div class=\"footTips\">本产品保证对您的任何个人信息进行严格保密</div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"bindphone\",\n  data() {\n    return {\n      userInfo: this.$util.parse(this.$util.getCookie(\"userInfo\")),\n      codeHtml: \"获取验证码\",\n      seconds: 60,\n      timer: null\n    };\n  },\n  methods: {\n    next() {\n      //绑定手机号后, 跳转实名认证页\n      if (this.$refs.phone.value == \"\") {\n        this.$util.blackTs(\"请输入您的手机号\");\n      } else if (!/^1[3456789]\\d{9}$/.test(this.$refs.phone.value)) {\n        this.$util.blackTs(\"请输入正确的手机号\");\n      } else if (this.$refs.verify.value == \"\") {\n        this.$util.blackTs(\"请输入验证码\");\n      } else {\n        this.bindPhone();\n      }\n    },\n    bindPhone() {\n      let wxUser = this.userInfo.wxUser;\n      this.ajaxRequest(\n        {\n          path: \"api-server/apih5/account/user/bindPhone\",\n          data: {\n            userNo: wxUser.userNo,\n            mobile: this.$refs.phone.value,\n            code: this.$refs.verify.value\n          }\n        },\n        res => {\n          if (res.data.code == \"0000\") {\n            this.$util.blackTs(\"绑定手机号成功\");\n            wxUser.mobile = this.$refs.phone.value;\n            this.userInfo.wxUser = wxUser;\n            this.$util.setCookie(\"userInfo\", JSON.stringify(this.userInfo));\n            setTimeout(() => {\n              if (\n                wxUser.idCard &&\n                wxUser.idCard != \"\" &&\n                wxUser.realName &&\n                wxUser.realName != \"\"\n              ) {\n                if(this.$route.query.from && this.$route.query.from == \"home\") {\n                  this.$router.replace({ path: \"/apply\" });\n                } else {\n                  window.history.back();\n                }\n              } else {\n                if(this.$route.query.from && this.$route.query.from == \"home\"){\n                  this.$router.replace({ path: \"/bindinfo\", query: { from: \"home\" } });\n                } else {\n                  window.history.back();\n                } \n              }\n            }, 600);\n          } else if (res.data.code == \"1006\") {\n            this.$util.blackTs(\"手机验证码错误\");\n          } else {\n            this.$util.blackTs(res.data.message);\n          }\n        }\n      );\n    },\n    sendCode() {\n      if (this.$refs.phone.value == \"\") {\n        this.$util.blackTs(\"请填写手机号\");\n      } else if (!/^1[3456789]\\d{9}$/.test(this.$refs.phone.value)) {\n        this.$util.blackTs(\"请输入正确的手机号\");\n      } else if (this.seconds == 60) {\n        this.ajaxRequest(\n          {\n            path: \"api-server/securityCode\",\n            data: {\n              mobile: this.$refs.phone.value,\n              type: 1\n            }\n          },\n          res => {\n            if (res.data.code == \"0\") {\n              this.$util.blackTs(\"验证码发送成功\");\n            } else {\n              this.$util.blackTs(res.data.message);\n            }\n          }\n        );\n        this.codeHtml = \"60s后重新获取\";\n        this.timer = setInterval(() => {\n          this.updateCode();\n        }, 1000);\n      }\n    },\n    updateCode() {\n      this.seconds = this.seconds - 1;\n      if (this.seconds == 0) {\n        this.codeHtml = \"重新获取\";\n        this.seconds = 60;\n        clearInterval(this.timer);\n      } else {\n        this.codeHtml = this.seconds + \"s后重新获取\";\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.bindinfo {\n  width: 100%;\n  height: 100%;\n}\n.bindinfoBox {\n  width: 100%;\n  height: auto;\n  min-height: 100%;\n  padding-bottom: 1.5rem;\n}\n.rows_1 {\n  position: relative;\n  padding: 0 0.24rem;\n  border-bottom: 1px #ececec solid;\n}\n.Tips {\n  font-size: 0.28rem;\n  color: #ef3d34;\n  height: 0.64rem;\n  text-indent: 0.24rem;\n  line-height: 0.64rem;\n  background-color: #ffefee;\n}\n.us_1 {\n  width: 20%;\n  height: 1rem;\n  line-height: 1rem;\n  font-size: 0.28rem;\n  font-size: 0.28rem;\n  color: #888888;\n  float: left;\n}\n::-webkit-input-placeholder {\n  color: #bebebe;\n  font-size: 0.28rem;\n}\n.username {\n  width: 80%;\n  float: left;\n  height: 1rem;\n  background: none;\n  color: #333333;\n  font-size: 0.28rem;\n}\n.width {\n  width: 45%;\n}\n.nextBtn {\n  font-size: 0.32rem;\n  color: #fff;\n  background: #ef3d34;\n  border-radius: 0.1rem;\n  margin: 0.6rem auto;\n  line-height: 0.98rem;\n  height: 0.98rem;\n  display: block;\n  width: 4.2rem;\n  text-align: center;\n}\n.footTips {\n  position: relative;\n  margin-top: -0.9rem;\n  height: 0.9rem;\n  font-size: 0.26rem;\n  line-height: 0.4rem;\n  color: #bebebe;\n  text-align: center;\n  clear: both;\n}\n.codeBtn {\n  position: relative;\n  display: block;\n  width: 35%;\n  float: left;\n  line-height: 1rem;\n  font-size: 0.28rem;\n  color: #333333;\n  text-align: center;\n}\n.codeBtn span {\n  position: absolute;\n  top: 0.18rem;\n  left: 0;\n  width: 1px;\n  height: 0.64rem;\n  background: #ececec;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./bindphone.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./bindphone.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./bindphone.vue?vue&type=template&id=0d959664&scoped=true&\"\nimport script from \"./bindphone.vue?vue&type=script&lang=js&\"\nexport * from \"./bindphone.vue?vue&type=script&lang=js&\"\nimport style0 from \"./bindphone.vue?vue&type=style&index=0&id=0d959664&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0d959664\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}