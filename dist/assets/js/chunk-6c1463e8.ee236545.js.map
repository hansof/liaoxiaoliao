{"version":3,"sources":["webpack:///./src/views/myproduct.vue?f632","webpack:///./src/views/myproduct.vue?935d","webpack:///src/views/myproduct.vue","webpack:///./src/views/myproduct.vue?b6cc","webpack:///./src/views/myproduct.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","refresh","infinite","_l","item","index","key","publisherIcon","defaultHead","on","$event","getUserFollow","_v","_s","publisherNickname","toLdetail","orderId","title","ifCombo","ifReturn","_e","resetTime","purchaseTime","directives","name","rawName","value","expression","staticRenderFns","data","userInfo","$util","parse","getCookie","lastId","datalist","noDate","noDateFlag","followStatus","Number","followUserNo","beforeRouteLeave","$author","next","components","defaultPage","methods","path","expertUserNo","publisherUserNo","userNo","wxUser","ajaxRequest","paramJson","res","code","findIntroduce","$router","push","query","getList","setTimeout","$refs","myscroller","finishInfinite","done","pattern","str","component"],"mappings":"gHAAA,yBAAqe,EAAG,G,yCCAxe,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,WAAW,CAACG,IAAI,aAAaC,MAAM,CAAC,aAAaR,EAAIS,QAAQ,cAAcT,EAAIU,WAAW,CAACN,EAAG,KAAK,CAACE,YAAY,QAAQ,CAACN,EAAIW,GAAIX,EAAY,UAAE,SAASY,EAAKC,GAAO,MAAO,CAACT,EAAG,KAAK,CAACU,IAAI,SAASD,GAAO,CAACT,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,MAAM,CAACE,YAAY,UAAUE,MAAM,CAAC,IAAMI,EAAKG,cAAc,QAAUf,EAAIgB,YAAY,IAAM,IAAIC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOlB,EAAImB,cAAcP,OAAUR,EAAG,MAAM,CAACE,YAAY,YAAY,CAACN,EAAIoB,GAAGpB,EAAIqB,GAAGT,EAAKU,sBAAsBlB,EAAG,MAAM,CAACE,YAAY,YAAYF,EAAG,MAAM,CAACE,YAAY,SAASW,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOlB,EAAIuB,UAAUX,EAAKY,YAAY,CAACxB,EAAIoB,GAAGpB,EAAIqB,GAAGT,EAAKa,UAAUrB,EAAG,MAAM,CAACE,YAAY,cAAc,CAAgB,KAAdM,EAAKc,QAActB,EAAG,MAAM,CAACE,YAAY,OAAO,CAACN,EAAIoB,GAAG,QAAwB,KAAfR,EAAKe,SAAevB,EAAG,MAAM,CAACE,YAAY,OAAO,CAACN,EAAIoB,GAAG,UAAUpB,EAAI4B,KAAK5B,EAAIoB,GAAG,mBAAmBpB,EAAIqB,GAAGrB,EAAI6B,UAAUjB,EAAKkB,2BAA0B,KAAK1B,EAAG,cAAc,CAAC2B,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAOlC,EAAc,WAAEmC,WAAW,kBAAkB,IAC3pCC,EAAkB,G,wBCkCtB,GACEJ,KAAM,YACNK,KAFF,WAGI,MAAO,CACLC,SAAUrC,KAAKsC,MAAMC,MAAMvC,KAAKsC,MAAME,UAAU,aAChDC,OAAQ,KACRC,SAAU,GACVC,QAAQ,EACRC,YAAY,EACZ7B,YAAa,aAAe,EAAlC,YACM8B,aAAcC,OACdC,aAAc,KAGlBC,iBAdF,SAcA,OACIhD,KAAKiD,QAAQ,SACbC,GAAK,IAEPC,WAAY,CACVC,YAAJ,QAEEC,QAAS,CACPnC,cADJ,SACA,cACA,uBACA,GACQoC,KAAM,8CACNlB,KAAM,CACJmB,aAAc5C,EAAK6C,gBACnBC,OAAQC,EAAOD,SAGnBzD,KAAK2D,YAAYC,GAAW,SAAlC,GAC6B,QAAjBC,EAAIzB,KAAK0B,KACX,EAAV,yBAEU,EAAV,eAEQ,EAAR,qBAGIC,cAnBJ,SAmBA,cACM/D,KAAK2D,YACX,CACQ,KAAR,8CACQ,KAAR,CACU,OAAV,qBAGA,YACA,qBACU,EAAV,SACY,QAAZ,gBACY,SAAZ,oBACY,QACZ,mCACA,WACA,YACY,WACZ,mCACA,CAAc,aAAd,UACA,CAAc,aAAd,QACY,aAAZ,kBACY,aAAZ,kBACY,YAAZ,IAEA,sBACA,2BAMIrC,UAnDJ,SAmDA,GACMtB,KAAKgE,QAAQC,KAAK,CAChBX,KAAM,WACNY,MAAO,CAAf,+BAGIC,QAzDJ,WAyDA,WACA,uBACMnE,KAAK2D,YACX,CACQ,KAAR,wCACQ,KAAR,CACU,OAAV,SACU,OAAV,YACU,SAAV,MAGA,YACA,yBACA,oCACY,EAAZ,UACA,WACc,EAAd,iBAGA,SAGc,EAAd,gDAFc,EAAd,6BAIY,EAAZ,4BAEA,2BACA,uBACY,EAAZ,eAEU,EAAV,eAKInD,QA5FJ,WA4FA,WACMR,KAAKyC,OAAS,KACdzC,KAAK2C,QAAS,EACdyB,YAAW,WACT,EAAR,UACQ,EAAR,yCACA,OAGI3D,SArGJ,SAqGA,cACUT,KAAK2C,OACP3C,KAAKqE,MAAMC,WAAWC,gBAAe,GAErCH,YAAW,WACT,EAAV,UACUI,GAAK,KACf,OAGI5C,UA/GJ,SA+GA,GACM,OAAO5B,KAAKsC,MAAMmC,QAAQC,EAAK,kBCxK8S,I,wBCQ/UC,EAAY,eACd,EACA7E,EACAqC,GACA,EACA,KACA,WACA,MAIa,aAAAwC,E","file":"assets/js/chunk-6c1463e8.ee236545.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./myproduct.vue?vue&type=style&index=0&id=5dbb602c&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./myproduct.vue?vue&type=style&index=0&id=5dbb602c&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"myproduct\"},[_c('scroller',{ref:\"myscroller\",attrs:{\"on-refresh\":_vm.refresh,\"on-infinite\":_vm.infinite}},[_c('ul',{staticClass:\"list\"},[_vm._l((_vm.datalist),function(item,index){return [_c('li',{key:'myprod'+index},[_c('div',{staticClass:\"padding024\"},[_c('div',{staticClass:\"ticbar\"},[_c('img',{staticClass:\"headimg\",attrs:{\"src\":item.publisherIcon,\"onerror\":_vm.defaultHead,\"alt\":\"\"},on:{\"click\":function($event){return _vm.getUserFollow(item)}}}),_c('div',{staticClass:\"username\"},[_vm._v(_vm._s(item.publisherNickname))]),_c('div',{staticClass:\"clear\"})]),_c('div',{staticClass:\"biaoti\",on:{\"click\":function($event){return _vm.toLdetail(item.orderId)}}},[_vm._v(_vm._s(item.title))]),_c('div',{staticClass:\"biaotitime\"},[(item.ifCombo=='1')?_c('div',{staticClass:\"tcn\"},[_vm._v(\"套餐\")]):(item.ifReturn=='1')?_c('div',{staticClass:\"bzf\"},[_vm._v(\"不中返还\")]):_vm._e(),_vm._v(\"\\n              \"+_vm._s(_vm.resetTime(item.purchaseTime)))])])])]})],2)]),_c('defaultPage',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.noDateFlag),expression:\"noDateFlag\"}]})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"myproduct\">\n    <scroller :on-refresh=\"refresh\" :on-infinite=\"infinite\" ref=\"myscroller\">\n      <ul class=\"list\">\n        <template v-for=\"(item,index) in datalist\">\n          <li :key=\"'myprod'+index\">\n            <div class=\"padding024\">\n              <div class=\"ticbar\">\n                <img\n                  @click=\"getUserFollow(item)\"\n                  :src=\"item.publisherIcon\"\n                  class=\"headimg\"\n                  :onerror=\"defaultHead\"\n                  alt\n                />\n                <div class=\"username\">{{item.publisherNickname}}</div>\n                <div class=\"clear\"></div>\n              </div>\n              <div class=\"biaoti\" @click=\"toLdetail(item.orderId)\">{{item.title}}</div>\n              <div class=\"biaotitime\">\n                 <div class=\"tcn\" v-if=\"item.ifCombo=='1'\" >套餐</div>\n                 <div class=\"bzf\" v-else-if=\"item.ifReturn=='1'\" >不中返还</div>\n                {{resetTime(item.purchaseTime)}}</div>\n              <!-- <div class=\"biaotitime\">{{this.$util.pattern(item.purchaseTime,'MM/dd HH:mm')}}</div> -->\n            </div>\n          </li>\n        </template>\n      </ul>\n    </scroller>\n    <defaultPage v-show=\"noDateFlag\"></defaultPage>\n  </div>\n</template>\n\n<script>\nimport defaultPage from \"../components/defaultPage/defaultPage\";\nexport default {\n  name: \"myproduct\",\n  data() {\n    return {\n      userInfo: this.$util.parse(this.$util.getCookie(\"userInfo\")),\n      lastId: null,\n      datalist: [],\n      noDate: false, //这是一个判断是否加载的开关\n      noDateFlag: false,\n      defaultHead: 'this.src=\"' + require(\"@/assets/img/head.png\") + '\"',\n      followStatus: Number,\n      followUserNo: \"\"\n    };\n  },\n  beforeRouteLeave(to, from, next) {\n    this.$author(\"false\");\n    next(true);\n  },\n  components: {\n    defaultPage\n  },\n  methods: {\n    getUserFollow(item) {\n      let wxUser = this.userInfo.wxUser;\n      let paramJson = {\n        path: \"api-server/apih5/account/user/getUserFollow\",\n        data: {\n          expertUserNo: item.publisherUserNo,\n          userNo: wxUser.userNo\n        }\n      };\n      this.ajaxRequest(paramJson, res => {\n        if (res.data.code == \"0000\") {\n          this.followStatus = res.data.data;\n        } else {\n          this.followStatus = 0;\n        }\n        this.findIntroduce(item);\n      });\n    },\n    findIntroduce(item) {\n      this.ajaxRequest(\n        {\n          path: \"api-server/apih5/account/user/findIntroduce\",\n          data: {\n            userNo: item.publisherUserNo\n          }\n        },\n        res => {\n          if (res.data.code == \"0000\") {\n            this.$author({\n              headImg: item.publisherIcon,\n              userName: item.publisherNickname,\n              content:\n                res.data.data == null || res.data.data == \"\"\n                  ? \"暂未设置资料内容\"\n                  : res.data.data,\n              contentCss:\n                res.data.data == null || res.data.data == \"\"\n                  ? { \"text-align\": \"center\" }\n                  : { \"text-align\": \"left\" },\n              followUserNo: item.publisherUserNo,\n              followStatus: this.followStatus == 1?true:false,\n              followFlag: true\n            })\n              .then(res => {})\n              .catch(res => {});\n          } else {\n          }\n        }\n      );\n    },\n    toLdetail(orderId) {\n      this.$router.push({\n        path: \"/ldetail\",\n        query: { orderId: orderId, page: \"myproduct\" }\n      });\n    },\n    getList() {\n      let wxUser = this.userInfo.wxUser;\n      this.ajaxRequest(\n        {\n          path: \"api-server/apih5/content/purchaseList\",\n          data: {\n            userno: wxUser.userNo,\n            lastId: this.lastId,\n            pageSize: 10\n          }\n        },\n        res => {\n          if (res.data.errorCode == \"0000\") {\n            if (JSON.stringify(res.data.value) == \"{}\") {\n              this.noDate = true;\n              if (!this.lastId) {\n                this.noDateFlag = true;\n              }\n            } else {\n              if (!this.lastId) {\n                this.datalist = res.data.value.result;\n              } else {\n                this.datalist = this.datalist.concat(res.data.value.result);\n              }\n              this.lastId = res.data.value.lastId;\n            }\n          } else if (res.data.errorCode == \"1001\") {\n            if (this.datalist.length == 0) {\n              this.noDateFlag = true;\n            }\n            this.noDate = true;\n          }\n        }\n      );\n    },\n    refresh() {\n      this.lastId = null; //重置\n      this.noDate = false; //重置数据判断\n      setTimeout(() => {\n        this.getList();\n        this.$refs.myscroller.finishPullToRefresh(); //刷新完毕关闭刷新的转圈圈\n      }, 1700);\n    },\n    // 上拉加载\n    infinite(done) {\n      if (this.noDate) {\n        this.$refs.myscroller.finishInfinite(true); //这个方法是不让它加载了，显示“没有更多数据”，要不然会一直转圈圈\n      } else {\n        setTimeout(() => {\n          this.getList();\n          done(true); //进行下一次加载操作\n        }, 1500);\n      }\n    },\n    resetTime(str) {\n      return this.$util.pattern(str, \"MM/dd HH:mm\");\n    }\n  }\n};\n</script>\n\n<style scoped>\n.list {\n  width: 100%;\n  height: 100%;\n  background: white;\n}\n.padding024 {\n  padding: 0.4rem 0.24rem 0 0.24rem;\n  position: relative;\n  padding-bottom: 0.23rem;\n  border-bottom: 1px #ececec solid;\n}\n.ticbar {\n  /* margin-top: 0.4rem; */\n  position: relative;\n}\n.username {\n  float: left;\n  height: 0.8rem;\n  font-size: 0.3rem;\n  color: #333333;\n  line-height: 0.8rem;\n  padding-left: 0.2rem;\n}\n.headimg {\n  width: 0.8rem;\n  height: 0.8rem;\n  float: left;\n  border-radius: 0.5rem;\n}\n.biaoti {\n  font-size: 0.32rem;\n  color: #333333;\n  line-height: 0.4rem;\n  padding-top: 0.25rem;\n  position: relative;\n  white-space: normal;\n  word-break: break-all;\n}\n.biaotitime {\n  font-size: 0.22rem;\n  text-align: right;\n  color: #b1b1b1;\n  margin-top: 0.13rem;\n  position: relative;\n}\n.bzf{ position: absolute; top: 0; bottom:0; margin-top:auto; margin-bottom:auto;left:0; height: .3rem; width: .98rem; display: flex;    justify-content:center;    align-items:Center; font-size: .2rem;color:#ef3d34;\nborder: 1px solid #ef3d34; border-radius: .05rem;}\n.tcn{position: absolute; top: 0; bottom:0; margin-top:auto; margin-bottom:auto;left:0; height: .3rem; width: .58rem; display: flex;    justify-content:center;    align-items:Center; font-size: .2rem;color:#5694f3;\nborder: 1px solid #5694f3; border-radius: .05rem;}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./myproduct.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./myproduct.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./myproduct.vue?vue&type=template&id=5dbb602c&scoped=true&\"\nimport script from \"./myproduct.vue?vue&type=script&lang=js&\"\nexport * from \"./myproduct.vue?vue&type=script&lang=js&\"\nimport style0 from \"./myproduct.vue?vue&type=style&index=0&id=5dbb602c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5dbb602c\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}